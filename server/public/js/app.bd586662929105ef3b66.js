webpackJsonp([1],{"+VcB":function(t,e){},"1zic":function(t,e){},"7zck":function(t,e){},FGQs:function(t,e){},HBQ5:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),i=n("Xxa5"),r=n.n(i),o=n("exGp"),s=n.n(o),c=n("Dd8w"),l=n.n(c),u=n("mtWM"),v=n.n(u),d=n("NYxO");n("M4fF");a.a.use(d.a);var p=new d.a.Store({state:{client:{authorized:!1,token:null,email:"",id:""}},getters:{authorizationStatus:function(t){return t.client.authorized},token:function(t){return t.client.token}},mutations:{authorization:function(t,e){t.client.authorized=e.authorized,t.client.token=e.token,t.client.email=e.email,t.client.id=e.id},logOut:function(t){t.client.authorized=!1,t.client.token=null,t.client.email=null,t.client.id=null}},actions:{authorization:function(t,e){t.commit("authorization",e)}}}),m=function(){return v.a.create({baseURL:"http://localhost:8081/",headers:{"Content-Type":"application/json","x-auth":p.getters.token}})},f=function(t){return m().post("managers/login",t)},h=function(t){return m().post("managers/logout",t)},_=function(){return m().get("/t")},g={data:function(){return{sideNav:!1,menuItems:[{iconTitle:"border_clear",title:"invoices",link:"invoices"},{iconTitle:"people",title:"all users",link:"users"}]}},methods:{logOut:function(){var t=this;return s()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h({token:t.$store.getters.token});case 3:e.sent,t.$store.commit("logOut"),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),alert("Ошибка");case 11:case"end":return e.stop()}},e,t,[[0,7]])}))()}}},k={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-navigation-drawer",{attrs:{fixed:"",app:""},model:{value:t.sideNav,callback:function(e){t.sideNav=e},expression:"sideNav"}},[n("v-list",{attrs:{dense:""}},t._l(t.menuItems,function(e){return n("v-list-tile",{key:e.title,attrs:{router:"",to:e.link}},[n("v-list-tile-action",[n("v-icon",[t._v(t._s(e.iconTitle))])],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v(t._s(e.title))])],1)],1)}))],1),t._v(" "),n("v-toolbar",{attrs:{color:"indigo",dark:"",fixed:"",app:""}},[n("v-toolbar-side-icon",{staticClass:"hidden-sm-and-up",nativeOn:{click:function(e){e.stopPropagation(),t.sideNav=!t.sideNav}}}),t._v(" "),n("v-toolbar-title",[n("router-link",{staticStyle:{cursor:"pointer"},attrs:{to:"/",tag:"span"}},[t._v("Trinetix system")])],1),t._v(" "),n("v-spacer"),t._v(" "),n("v-toolbar-items",{staticClass:"hidden-xs-only"},[t._l(t.menuItems,function(e){return n("v-btn",{key:e.title,attrs:{flat:"",router:"",to:e.link}},[n("v-icon",{attrs:{left:""}},[t._v("\n          "+t._s(e.iconTitle)+"\n        ")]),t._v("\n        "+t._s(e.title)+"\n      ")],1)}),t._v(" "),n("v-menu",{attrs:{"offset-y":""}},[n("v-btn",{attrs:{slot:"activator",flat:""},slot:"activator"},[n("v-avatar",{staticClass:"mr-2",attrs:{size:"36px"}},[n("img",{attrs:{src:"https://avatars0.githubusercontent.com/u/9064066?v=4&s=460",alt:"John"}})]),t._v("\n          Rad\n        ")],1),t._v(" "),n("v-list",[n("v-list-tile",[n("v-list-tile-title",[n("v-icon",{staticClass:"mr-2",attrs:{left:""}},[t._v("account_circle")]),t._v("Profile info")],1)],1),t._v(" "),n("v-list-tile",{on:{click:t.logOut}},[n("v-list-tile-title",[n("v-icon",{staticClass:"mr-2",attrs:{left:""}},[t._v("keyboard_tab")]),t._v("Log out\n            ")],1)],1)],1)],1)],2)],1)],1)},staticRenderFns:[]},x=n("VU/8")(g,k,!1,null,null,null).exports,b={data:function(){return{email:"",password:""}},methods:{submit:function(){var t=this;return s()(r.a.mark(function e(){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f({email:t.email,password:t.password});case 3:n=e.sent,a={authorized:n.data.session.authorized,id:n.data.session.manager._id,email:n.data.session.manager.email,token:n.data.token},t.$store.commit("authorization",a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()}}},w={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-content",[n("v-container",{attrs:{fluid:"","fill-height":""}},[n("v-layout",{attrs:{"align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{dark:"",color:"primary"}},[n("v-toolbar-title",[t._v("Login form")])],1),t._v(" "),n("v-card-text",[n("v-form",[n("v-text-field",{attrs:{"prepend-icon":"person",name:"login",label:"Login",type:"text"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),n("v-text-field",{attrs:{"prepend-icon":"lock",name:"password",label:"Password",id:"password",type:"password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),t._v(" "),n("v-card-actions",[n("v-spacer"),t._v(" "),n("v-btn",{attrs:{color:"primary"},on:{click:t.submit}},[t._v("Login")])],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var z=n("VU/8")(b,w,!1,function(t){n("1zic")},null,null).exports,y={data:function(){return{}},methods:{},computed:l()({},Object(d.b)(["authorizationStatus"])),components:{headerComponent:x,loginComponent:z},beforeCreate:function(){var t=this;return s()(r.a.mark(function e(){var n,a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,_();case 3:n=e.sent,console.log(n.data),n.data.manager&&(a={authorized:!0,id:n.data.manager._id,email:n.data.manager.email,token:n.data.xAuth},t.$store.commit("authorization",a)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,t,[[0,8]])}))()}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return this.authorizationStatus?e("v-app",[e("header-component"),this._v(" "),e("v-content",[e("v-container",{attrs:{fluid:""}},[e("router-view")],1)],1)],1):e("v-app",{attrs:{id:"inspire"}},[e("login-component")],1)},staticRenderFns:[]};var N=n("VU/8")(y,C,!1,function(t){n("+VcB")},"data-v-0cda1037",null).exports,O=n("/ocq"),$=n("wUZA");a.a.use(O.a);var F=new O.a({routes:[{path:"/",name:"Home",component:$.default},{path:"/login",name:"Login",component:z}]}),S=n("3EgV"),T=n.n(S);n("7zck");a.a.use(T.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:F,store:p,render:function(t){return t(N)}})},wUZA:function(t,e,n){"use strict";var a=n("FGQs"),i=n.n(a),r=n("xSsj");var o=function(t){n("HBQ5")},s=n("VU/8")(i.a,r.a,!1,o,"data-v-5047c4a6",null);e.default=s.exports},xSsj:function(t,e,n){"use strict";var a={render:function(){var t=this.$createElement;return(this._self._c||t)("h2",[this._v("vsefvsev")])},staticRenderFns:[]};e.a=a}},["NHnr"]);
//# sourceMappingURL=app.bd586662929105ef3b66.js.map